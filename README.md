# Posting-Space-Photos-to-Telegram-Channel

Проект предназначен для отправки фотографий космоса в телеграм-канал с помощью чат-бота.
Фотографии пользователь может скопировать сам в специально созданную папку. 
А также пользователь может скачать фотографии с сайтов NASA и SPACEX с помощью входящих в проект скриптов.
Проект состоит из нескольких независимых скриптов.

### Как установить

Python3 должен быть уже установлен. Затем используйте pip (или pip3, есть есть конфликт с Python2) для установки зависимостей:

    pip install -r requirements.txt

Далее необходимо создать Чат-бота в Телеграм с помощью [BotFather](https://way23.ru/регистрация-бота-в-telegram.html).

Кроме того нужно создать [Telegram-канал](https://www.internet-technologies.ru/articles/newbie/kak-sozdat-kanal-v-telegram-poshagovoe-rukovodstvo.html), куда и будут отправляться фотографии. Канал обязательно должен быть публичным.

После этого добавьте бота в подписчики канала и сделайте его администратором, чтобы он мог рассылать сообщения. [Ссылка здесь](https://softolet.ru/telegramm/boty/dlya-chego-delat-bota-administratorom-i-kak-eto-delaetsya.html).



### Переменные окружения
Для работы скриптов нужно создать файл `.env`. Его содержимое должно быть похожим на это:
```
NASA_TOKEN=f2Qхххххххххххххххххххххххххххххe
APOD_COUNT=5
EPIC_COUNT=3
TG_TOKEN=6ХХХХХХХХ0:AХХХХХХХХХХХХХХХD-0ХХХХY
DIR_WITH_PHOTOS=images
CHAT_ID=@trail_cosmos_photo
POST_INTERVAL=14400
```
где:

`NASA_TOKEN` - это ваш токен от сайта Nasa. Вам нужно [получить](https://api.nasa.gov/) свой.

`APOD_COUNT` - количество загружаемых фото дня космоса с сервера Nasa

`EPIC_COUNT` - количество загружаемых фото Земли с сервера Nasa. Рекомендуется ограничивать это количество, т.к. загрузка фотографий занимает очень много времени.

`TG_TOKEN` - это токен вашего бота. Вы его получили при создании бота у [BotFather](https://way23.ru/регистрация-бота-в-telegram.html).

`DIR_WITH_PHOTOS` - это папка внутри проекта, куда будут загружаться фотографии. Из этой же папки бот будет отправлять фото в телеграм-канал. Можно указать полный путь.

`CHAT_ID` - это id вашего Телеграм-канала. На него будут отправляться изображения. 

`POST_INTERVAL` - это промежуток времени между отправкой изображений в секундах. По умолчанию 14400 секунд (4 часа). Пользователь может изменить по своему усмотрению.


### Скрипт `fetch_spacex_images` 
Загружает фото указанного id старта с сайта SPACEX. По умолчанию загружает фото последнего запуска (latest).
Номер id старта нужно указать в командной строке при запуске скрипта.
Пример запуска:

    python fetch_spacex_images.py -launch_id 5eb87d47ffd86e000604b38a


### Скрипт `fetch_nasa_apod_images` 
Загружает фото дня космоса с сайта NASA. Количество загружаемых фото ограничивается внешней переменной `APOD_COUNT` 


### Скрипт `fetch_nasa_epic_images` 
Загружает фото Земли с сайта NASA. Количество загружаемых фото ограничивается внешней переменной `EPIC_COUNT` 


### Скрипт `auto_posting` 
Делает автоматичесую публикацию случайно выбранной фотографии из специальной папки, заданной внешней переменной `DIR_WITH_PHOTOS`, в телеграм-канал. Публикация выполняется каждый 4 часа. Для изменения интервала нужно использовать внешнюю переменную `POST_INTERVAL`. Скрипт выполняется бесконечно, поэтому для завершения необходимо нажать `CTRL+C`


### Скрипт `main` 
Публикует в телеграм-канал одну указанную пользователем в командной строке фотографию. Если ничего не указано, то публикуется случайно выбранная фотография.
Пример запуска:

    python main.py -file spacex_1.jpeg
 

### Скрипт `file_operations`
Выполняет общие для всех скриптов операции:
- Проверяет, существует ли папка, заданная внешней переменной `DIR_WITH_PHOTOS`
- Если нет, то создает ее
- Сохраняет загруженную фотографию в данной папке с передаваем названием и типом изображения.


### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).